<h1>Add Task</h1>
<div class="m-auto" style="max-width: 800px">
  <form
    [formGroup]="taskCreationForm"
    class="formgrid grid md:justify-content-between justify-content-center gap-5"
  >
    <div class="p-fluid flex flex-column gap-5">
      <div class="flex flex-column gap-2">
        <p-floatLabel>
          <input
            pInputText
            id="title"
            aria-describedby="title-help"
            formControlName="title"
          />
          <label for="title">Title</label>
        </p-floatLabel>
        <small id="title-help">
          <span
            *ngIf="
              !taskCreationForm.get('title')?.valid &&
              taskCreationForm.get('title')?.dirty
            "
            >Enter your title.</span
          ></small
        >
      </div>
      <div class="flex flex-column gap-2">
        <p-floatLabel>
          <textarea
            rows="5"
            cols="30"
            pInputTextarea
            formControlName="description"
            [autoResize]="true"
            id="description"
          >
          </textarea>
          <label for="description">Description</label>
        </p-floatLabel>
        <small>
          <span
            *ngIf="
              !taskCreationForm.get('description')?.valid &&
              taskCreationForm.get('description')?.dirty
            "
            >Enter your description.</span
          >
        </small>
      </div>

      <div class="p-fluid flex flex-column gap-2">
        <p-floatLabel>
          <p-multiSelect
            inputId="userSelection"
            id="select"
            [options]="users"
            display="chip"
            optionLabel="name"
            formControlName="selectedUsers"
            (onPanelShow)="toggleIcons('contacts')"
            (onPanelHide)="toggleIcons('contacts')"
          >
            <ng-template pTemplate="dropdownicon">
              <i *ngIf="!isMultiSelectExpanded" class="pi pi-chevron-down"></i>
              <i *ngIf="isMultiSelectExpanded" class="pi pi-chevron-up"></i>
            </ng-template>
          </p-multiSelect>
          <label for="userSelection">Assigned to</label>
        </p-floatLabel>
        <small>
          <span
            *ngIf="
              !taskCreationForm.get('selectedUsers')?.valid &&
              taskCreationForm.get('selectedUsers')?.dirty
            "
            >Select your contacts.</span
          >
        </small>
      </div>
    </div>

    <div class="separator hidden md:block"></div>

    <div class="flex flex-column gap-5">
      <div class="flex flex-column gap-2">
        <p-floatLabel>
          <p-calendar
            [showIcon]="true"
            [showOnFocus]="false"
            inputId="date"
            aria-describedby="date-help"
            formControlName="date"
            dateFormat="dd.mm.yy"
            [touchUI]="true"
            [minDate]="minDate"
          />
          <label for="date">Due date</label>
        </p-floatLabel>
        <small id="date-help">
          <span
            *ngIf="
              !taskCreationForm.get('date')?.valid &&
              taskCreationForm.get('date')?.dirty
            "
            >Enter your date.</span
          >
        </small>
      </div>
      <div class="flex flex-column gap-2 align-items-center">
        <p-selectButton
          [options]="priorityOptions"
          formControlName="priority"
          optionLabel="priority"
          optionValue="value"
          aria-describedby="priority-help"
        />
        <small id="priority-help">
          <span
            *ngIf="
              !taskCreationForm.get('priority')?.valid &&
              taskCreationForm.get('priority')?.dirty
            "
            >Select the priority status.</span
          >
        </small>
      </div>
      <div class="flex flex-column gap-2 p-fluid">
        <p-floatLabel>
          <p-dropdown
            [options]="categories"
            optionLabel="name"
            formControlName="category"
            inputId="dropDown"
            aria-describedby="category-help"
            (onShow)="toggleIcons('category')"
            (onHide)="toggleIcons('category')"
          >
            <ng-template pTemplate="dropdownicon">
              <i *ngIf="!isDropdownExpanded" class="pi pi-chevron-down"></i>
              <i *ngIf="isDropdownExpanded" class="pi pi-chevron-up"></i>
            </ng-template>
          </p-dropdown>

          <label>Category</label>
        </p-floatLabel>
        <small id="category-help">
          <span
            *ngIf="
              !taskCreationForm.get('category')?.valid &&
              taskCreationForm.get('category')?.dirty
            "
            >Select a category.</span
          >
        </small>
      </div>
      <div class="flex flex-column gap-2">
        <p-floatLabel>
          <p-chips
            formControlName="subtasks"
            class="max-w-max"
            [max]="5"
            pTooltip='Type in your subtasks and press "Enter" (Max. 5).'
            tooltipPosition="top"
          />
          <label>Subtasks</label>
        </p-floatLabel>
      </div>
      <div
        class="flex sm:justify-content-between justify-content-center gap-4 mt-4 grid"
      >
        <p-button
          label="Clear"
          [outlined]="true"
          severity="danger"
          type="button"
          icon="pi pi-times"
          class="custom-button-width"
          (onClick)="onClear()"
        />
        <p-button
          label="Submit"
          icon="pi pi-check"
          type="Submit"
          [disabled]="!taskCreationForm.valid"
          (onClick)="onSubmit()"
        />
      </div>
    </div>
  </form>
</div>
